<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Byakuren: lib/octree.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Byakuren<span id="projectnumber">&#160;1.0.1</span>
   </div>
   <div id="projectbrief">A theme color extracting library implemented by C.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('octree_8h.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">octree.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="bkr__common_8h_source.html">../bkr_common.h</a>&quot;</code><br />
</div>
<p><a href="octree_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aab7187f111b4bf840b483a50d5f45736" id="r_aab7187f111b4bf840b483a50d5f45736"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structbkr__octree__node.html">bkr_octree_node</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aab7187f111b4bf840b483a50d5f45736">bkr_build_octree</a> (<a class="el" href="structbkr__rgb.html">bkr_rgb</a> *pixels, uint32_t pixel_count, uint32_t max_colors)</td></tr>
<tr class="memdesc:aab7187f111b4bf840b483a50d5f45736"><td class="mdescLeft">&#160;</td><td class="mdescRight">Byakuren - A theme color extracting library implemented by C.  <br /></td></tr>
<tr class="separator:aab7187f111b4bf840b483a50d5f45736"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7e454678b317b689189d33ce4c3875a" id="r_af7e454678b317b689189d33ce4c3875a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af7e454678b317b689189d33ce4c3875a">bkr_release_octree</a> (<a class="el" href="structbkr__octree__node.html">bkr_octree_node</a> *node)</td></tr>
<tr class="memdesc:af7e454678b317b689189d33ce4c3875a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases the memory allocated for an octree structure.  <br /></td></tr>
<tr class="separator:af7e454678b317b689189d33ce4c3875a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64c0dbf67f5f76e9c26c7f9576e4bc9d" id="r_a64c0dbf67f5f76e9c26c7f9576e4bc9d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a64c0dbf67f5f76e9c26c7f9576e4bc9d">bkr_octree_calculate_color_stats</a> (<a class="el" href="structbkr__octree__node.html">bkr_octree_node</a> *node, <a class="el" href="structbkr__color__stats.html">bkr_color_stats</a> stats[])</td></tr>
<tr class="memdesc:a64c0dbf67f5f76e9c26c7f9576e4bc9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates color statistics from a built octree.  <br /></td></tr>
<tr class="separator:a64c0dbf67f5f76e9c26c7f9576e4bc9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="aab7187f111b4bf840b483a50d5f45736" name="aab7187f111b4bf840b483a50d5f45736"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab7187f111b4bf840b483a50d5f45736">&#9670;&#160;</a></span>bkr_build_octree()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structbkr__octree__node.html">bkr_octree_node</a> * bkr_build_octree </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbkr__rgb.html">bkr_rgb</a> *</td>          <td class="paramname"><span class="paramname"><em>pixels</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>pixel_count</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>max_colors</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Byakuren - A theme color extracting library implemented by C. </p>
<p>Copyright (c) 2024 XadillaX <a href="#" onclick="location.href='mai'+'lto:'+'i@2'+'33'+'3.m'+'oe'; return false;">i@233<span class="obfuscator">.nosp@m.</span>3.mo<span class="obfuscator">.nosp@m.</span>e</a></p>
<p>MIT License <a href="https://github.com/XadillaX/byakuren/blob/master/LICENSE">https://github.com/XadillaX/byakuren/blob/master/LICENSE</a></p>
<p>Builds an octree color quantization structure from an array of pixels.</p>
<p>This function constructs an octree representation of the color space for the given pixel array. The octree is used to efficiently quantize colors and reduce the color palette to a specified maximum number of colors.</p>
<p>The octree is built by iteratively adding colors and reducing the tree when necessary to maintain the maximum color limit. This process involves creating new nodes, updating leaf counts, and merging nodes when the tree exceeds the specified size.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pixels</td><td>Pointer to an array of <a class="el" href="structbkr__rgb.html" title="RGB color structure.">bkr_rgb</a> structures representing the input pixels. </td></tr>
    <tr><td class="paramname">pixel_count</td><td>The number of pixels in the input array. </td></tr>
    <tr><td class="paramname">max_colors</td><td>The maximum number of colors allowed in the final quantized palette. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the root node of the constructed octree, or NULL if an error occurred. </dd></dl>

</div>
</div>
<a id="a64c0dbf67f5f76e9c26c7f9576e4bc9d" name="a64c0dbf67f5f76e9c26c7f9576e4bc9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64c0dbf67f5f76e9c26c7f9576e4bc9d">&#9670;&#160;</a></span>bkr_octree_calculate_color_stats()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int bkr_octree_calculate_color_stats </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbkr__octree__node.html">bkr_octree_node</a> *</td>          <td class="paramname"><span class="paramname"><em>node</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbkr__color__stats.html">bkr_color_stats</a></td>          <td class="paramname"><span class="paramname"><em>stats</em></span>[]&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates color statistics from a built octree. </p>
<p>This function traverses the octree structure and computes color statistics for each leaf node. It aggregates information such as color values and pixel counts, providing a summary of the quantized color palette.</p>
<p>The function performs the following steps:</p><ol type="1">
<li>For each leaf node, it calculates the average color.</li>
<li>It stores the color information and pixel count in the provided stats array.</li>
<li>If the current node is the root, it sorts the final statistics for consistent output.</li>
</ol>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>Pointer to the root node of the octree to analyze. </td></tr>
    <tr><td class="paramname">stats</td><td>Pointer to an array of <a class="el" href="structbkr__color__stats.html" title="Color statistics structure.">bkr_color_stats</a> structures where the results will be stored. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of unique colors found in the octree (i.e., the number of leaf nodes). </dd></dl>

</div>
</div>
<a id="af7e454678b317b689189d33ce4c3875a" name="af7e454678b317b689189d33ce4c3875a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7e454678b317b689189d33ce4c3875a">&#9670;&#160;</a></span>bkr_release_octree()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void bkr_release_octree </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbkr__octree__node.html">bkr_octree_node</a> *</td>          <td class="paramname"><span class="paramname"><em>node</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Releases the memory allocated for an octree structure. </p>
<p>This function recursively frees all memory associated with the given octree, including all its child nodes. It should be called when the octree is no longer needed to prevent memory leaks.</p>
<p>The function traverses the entire tree structure, freeing each node in a depth-first manner. After calling this function, the passed node pointer and all its children become invalid and should not be accessed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>Pointer to the root node of the octree to be released. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="octree_8h.html">octree.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
